import streamlit as st
import pandas as pd
import numpy as np
import random

# --- 1. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö (Page Config) ---
st.set_page_config(
    page_title="Team Sensor Command Center",
    page_icon="‚ö°",
    layout="wide",
    initial_sidebar_state="expanded"
)

# --- 2. ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Quiz (Quiz Bank) ---
quiz_data = {
    "Heat Balance": [
        {"q": "‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏´‡∏≤ % Heat Balance ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å Engineering ‡∏Ñ‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡πÉ‡∏î?", "c": ["(Qevap + Winput - Qcond) / Qcond * 100", "(Qevap - Qcond) / Winput * 100", "(Qcond + Winput) / Qevap * 100", "Qevap / Qcond * 100"], "a": "(Qevap + Winput - Qcond) / Qcond * 100"},
        {"q": "‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô (Criteria) ‡∏Ç‡∏≠‡∏á % Heat Balance ‡∏ó‡∏µ‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?", "c": ["¬± 10%", "¬± 5%", "¬± 2%", "0% ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô"], "a": "¬± 5%"},
        {"q": "‡∏´‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Qevap (Cooling Load) ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏õ‡πá‡∏ô Ton ‡∏™‡∏π‡∏ï‡∏£‡∏Ñ‡∏∑‡∏≠ 500 x GPM x Delta T ‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?", "c": ["12,000", "24", "3.516", "15,000"], "a": "12,000"},
        {"q": "‡∏Ñ‡πà‡∏≤ W_input ‡πÉ‡∏ô‡∏™‡∏°‡∏Å‡∏≤‡∏£ Heat Balance ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡∏™‡πà‡∏ß‡∏ô‡πÑ‡∏´‡∏ô?", "c": ["‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡πÅ‡∏™‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå", "‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏Ç‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏µ‡πà Chiller ‡πÉ‡∏ä‡πâ (Compressor work)", "‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏•‡∏°‡∏à‡∏≤‡∏Å Cooling Tower", "‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏®‡∏±‡∏Å‡∏¢‡πå‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡πä‡∏°‡∏ô‡πâ‡∏≥"], "a": "‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏Ç‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏µ‡πà Chiller ‡πÉ‡∏ä‡πâ (Compressor work)"},
        {"q": "‡∏ñ‡πâ‡∏≤ % Heat Balance ‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô +15% (Positive) ‡∏Ç‡πâ‡∏≠‡πÉ‡∏î‡∏Ñ‡∏∑‡∏≠‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?", "c": ["‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ß‡∏±‡∏î Flow ‡∏ù‡∏±‡πà‡∏á Evaporator ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≥‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á", "‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ß‡∏±‡∏î Flow ‡∏ù‡∏±‡πà‡∏á Condenser ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≥‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á", "‡πÑ‡∏ü‡∏ï‡∏Å", "‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡πÅ‡∏≠‡∏£‡πå‡∏£‡∏±‡πà‡∏ß"], "a": "‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ß‡∏±‡∏î Flow ‡∏ù‡∏±‡πà‡∏á Condenser ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≥‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á"},
        {"q": "1 Ton ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏¢‡πá‡∏ô (RT) ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏Å‡∏µ‡πà kW (Thermal)?", "c": ["1.0 kW", "3.5169 kW", "12 kW", "0.284 kW"], "a": "3.5169 kW"},
        {"q": "‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô CPN ‡∏™‡∏≤‡∏Ç‡∏≤‡∏®‡∏£‡∏µ‡∏£‡∏≤‡∏ä‡∏≤ ‡∏û‡∏ö‡∏ß‡πà‡∏≤ %Heat Balance ‡∏™‡∏π‡∏á‡∏ñ‡∏∂‡∏á 100.09% ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÉ‡∏î?", "c": ["‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢", "Flowrate ‡∏ù‡∏±‡πà‡∏á Condenser ‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ (‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ GUI)", "‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡∏£‡πâ‡∏≠‡∏ô‡∏à‡∏±‡∏î", "‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ú‡∏¥‡∏î"], "a": "Flowrate ‡∏ù‡∏±‡πà‡∏á Condenser ‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ (‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ GUI)"},
        {"q": "Qcond (Heat Rejection) ‡∏õ‡∏Å‡∏ï‡∏¥‡∏à‡∏∞‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ Qevap (Cooling Load)?", "c": ["‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏™‡∏°‡∏≠", "‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô‡πÄ‡∏™‡∏°‡∏≠", "‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏™‡∏°‡∏≠ (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏£‡∏ß‡∏°‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≠‡∏°‡πÄ‡∏û‡∏£‡∏™‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏î‡πâ‡∏ß‡∏¢)", "‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ï‡πà‡∏£‡∏∏‡πà‡∏ô Chiller"], "a": "‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏™‡∏°‡∏≠ (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏£‡∏ß‡∏°‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≠‡∏°‡πÄ‡∏û‡∏£‡∏™‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏î‡πâ‡∏ß‡∏¢)"},
        {"q": "‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢ GPM ‡πÄ‡∏õ‡πá‡∏ô Ton ‡πÉ‡∏ô‡∏™‡∏π‡∏ï‡∏£ Ton = (GPM x Delta T) / 24 ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö GPM ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÉ‡∏î?", "c": ["Imperial Gallon (UK)", "US Gallon", "Liters per minute", "Cubic meter per hour"], "a": "US Gallon"},
        {"q": "‡∏ó‡∏≥‡πÑ‡∏°‡πÄ‡∏£‡∏≤‡∏ñ‡∏∂‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Heat Balance?", "c": ["‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÑ‡∏ü", "‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î (Data Integrity)", "‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ô‡πâ‡∏≥", "‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡πà‡∏á‡πÄ‡∏â‡∏¢‡πÜ"], "a": "‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î (Data Integrity)"}
    ],
    "Calibration": [
        {"q": "‡∏™‡∏°‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏Ñ‡πà‡∏≤ Error ‡∏Ç‡∏≠‡∏á‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå ‡∏Ñ‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡πÉ‡∏î?", "c": ["Error = Standard - Reading", "Error = Reading (UUC) - Standard", "Error = Standard / Reading", "Error = (Standard + Reading) / 2"], "a": "Error = Reading (UUC) - Standard"},
        {"q": "DUT ‡∏¢‡πà‡∏≠‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏≠‡∏∞‡πÑ‡∏£?", "c": ["Device Under Test", "Data Unit Transfer", "Digital Utility Tool", "Daily Usage Time"], "a": "Device Under Test"},
        {"q": "‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå Reference Standard ‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡∏°‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ‡∏™‡∏≠‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö Temp/Humidity ‡∏Ñ‡∏∑‡∏≠‡∏£‡∏∏‡πà‡∏ô‡πÉ‡∏î?", "c": ["Fluke 87V", "Testo 440dp", "Hioki PW3360", "Kyoritsu 4105"], "a": "Testo 440dp"},
        {"q": "‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö (Calibration) ‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡πâ‡∏á (Adjustment) ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?", "c": ["‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô", "Calibration ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π Error, Adjustment ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÑ‡∏Ç‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á", "Calibration ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏°", "Adjustment ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ñ‡πà‡∏≤‡∏ô"], "a": "Calibration ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π Error, Adjustment ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÑ‡∏Ç‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á"},
        {"q": "‡∏ñ‡πâ‡∏≤ Standard ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ 25.0¬∞C ‡πÅ‡∏ï‡πà Sensor ‡πÄ‡∏£‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ 25.5¬∞C ‡∏Ñ‡πà‡∏≤ Error ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?", "c": ["-0.5¬∞C", "+0.5¬∞C", "0.0¬∞C", "1.02%"], "a": "+0.5¬∞C"},
        {"q": "Uncertainty ‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡∏≠‡∏∞‡πÑ‡∏£?", "c": ["‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô‡∏ß‡∏±‡∏î", "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Å‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠", "‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ó‡∏ò‡πå"], "a": "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î"},
        {"q": "‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÅ‡∏ö‡∏ö Comparison ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?", "c": ["‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô (Standard) ‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô", "‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏õ‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®", "‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏≠‡∏≤‡πÄ‡∏≠‡∏á", "‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß"], "a": "‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô (Standard) ‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô"},
        {"q": "‡∏à‡∏≤‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ Zigbee Sensor ‡∏™‡∏≠‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ó‡∏µ‡πà‡∏à‡∏∏‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô (Humidity) ‡∏Å‡∏µ‡πà‡∏à‡∏∏‡∏î?", "c": ["1 ‡∏à‡∏∏‡∏î (50%)", "3 ‡∏à‡∏∏‡∏î (50%, 70%, 90%)", "5 ‡∏à‡∏∏‡∏î", "‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏≠‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô"], "a": "3 ‡∏à‡∏∏‡∏î (50%, 70%, 90%)"},
        {"q": "‡∏ñ‡πâ‡∏≤‡∏Ñ‡πà‡∏≤ Error ‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î (Out of Tolerance) ‡πÄ‡∏£‡∏≤‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?", "c": ["‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ", "‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ Adjustment ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Sensor ‡πÉ‡∏´‡∏°‡πà", "‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏¥‡πâ‡∏á", "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô"], "a": "‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ Adjustment ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Sensor ‡πÉ‡∏´‡∏°‡πà"},
        {"q": "Testo 440dp ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô Standard ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏™‡∏≠‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö (Re-calibration) ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?", "c": ["‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏û‡∏á", "‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏≠‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ï‡∏≤‡∏°‡∏£‡∏≠‡∏ö (‡πÄ‡∏ä‡πà‡∏ô ‡∏ó‡∏∏‡∏Å 1 ‡∏õ‡∏µ)", "‡∏™‡∏≠‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î‡∏ä‡∏µ‡∏û", "‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ï‡πà‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå"], "a": "‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏≠‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ï‡∏≤‡∏°‡∏£‡∏≠‡∏ö (‡πÄ‡∏ä‡πà‡∏ô ‡∏ó‡∏∏‡∏Å 1 ‡∏õ‡∏µ)"}
    ],
    "CPMS & Efficiency": [
        {"q": "‡∏Ñ‡πà‡∏≤ Efficiency ‡∏Ç‡∏≠‡∏á Chiller (kW/RT) ‡∏¢‡∏¥‡πà‡∏á‡∏°‡∏≤‡∏Å ‡∏´‡∏£‡∏∑‡∏≠ ‡∏¢‡∏¥‡πà‡∏á‡∏ô‡πâ‡∏≠‡∏¢ ‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏î‡∏µ?", "c": ["‡∏¢‡∏¥‡πà‡∏á‡∏°‡∏≤‡∏Å‡∏¢‡∏¥‡πà‡∏á‡∏î‡∏µ", "‡∏¢‡∏¥‡πà‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏¢‡∏¥‡πà‡∏á‡∏î‡∏µ", "‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö 1.0 ‡πÄ‡∏™‡∏°‡∏≠", "‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"], "a": "‡∏¢‡∏¥‡πà‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏¢‡∏¥‡πà‡∏á‡∏î‡∏µ"},
        {"q": "Approach Temp ‡∏Ç‡∏≠‡∏á Evaporator ‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏•‡∏ï‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏î?", "c": ["Leaving Chilled Water Temp ‡∏Å‡∏±‡∏ö Refrigerant Temp", "Entering Condenser Water ‡∏Å‡∏±‡∏ö Wet Bulb", "Chilled Water Supply ‡∏Å‡∏±‡∏ö Return", "‡∏ô‡πâ‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ ‡∏Å‡∏±‡∏ö ‡∏ô‡πâ‡∏≥‡∏≠‡∏≠‡∏Å"], "a": "Leaving Chilled Water Temp ‡∏Å‡∏±‡∏ö Refrigerant Temp"},
        {"q": "‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô CPN ‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤ ‡∏Ñ‡πà‡∏≤ Chiller Plant Efficiency ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?", "c": ["0.65 kW/RT", "0.76 kW/RT", "1.20 kW/RT", "0.50 kW/RT"], "a": "0.76 kW/RT"},
        {"q": "‡∏ñ‡πâ‡∏≤ Approach Temp ‡∏Ç‡∏≠‡∏á Condenser ‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ (‡πÄ‡∏ä‡πà‡∏ô > 3¬∞F) ‡∏ö‡πà‡∏á‡∏ö‡∏≠‡∏Å‡∏ñ‡∏∂‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∞‡πÑ‡∏£?", "c": ["‡∏ó‡πà‡∏≠ Condenser ‡∏™‡∏Å‡∏õ‡∏£‡∏Å (Fouling) ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏∞‡∏Å‡∏£‡∏±‡∏ô‡∏à‡∏±‡∏ö", "‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡πÅ‡∏≠‡∏£‡πå‡∏Ç‡∏≤‡∏î", "‡∏Ñ‡∏≠‡∏°‡πÄ‡∏û‡∏£‡∏™‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏û‡∏±‡∏á", "‡∏û‡∏±‡∏î‡∏•‡∏° Cooling Tower ‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ"], "a": "‡∏ó‡πà‡∏≠ Condenser ‡∏™‡∏Å‡∏õ‡∏£‡∏Å (Fouling) ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏∞‡∏Å‡∏£‡∏±‡∏ô‡∏à‡∏±‡∏ö"},
        {"q": "kW/RT ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏î?", "c": ["Power (kW) / Cooling Load (Ton)", "Cooling Load (Ton) / Power (kW)", "Flow (GPM) x Delta T", "Volt x Amp x PF"], "a": "Power (kW) / Cooling Load (Ton)"},
        {"q": "Chiller ‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (kW/RT ‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î) ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà Load ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?", "c": ["10-20%", "40-50%", "70-90%", "100% ‡πÄ‡∏ï‡πá‡∏°‡∏û‡∏¥‡∏Å‡∏±‡∏î"], "a": "70-90%"},
        {"q": "‡∏™‡∏π‡∏ï‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ (‡∏ö‡∏≤‡∏ó) ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏á‡πà‡∏≤‡∏¢ ‡∏Ñ‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡πÉ‡∏î?", "c": ["kW x ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô x ‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢", "Ton x ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á x 10", "Amp x Volt", "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏π‡∏Å"], "a": "kW x ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô x ‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢"},
        {"q": "Delta T (‡∏ú‡∏•‡∏ï‡πà‡∏≤‡∏á‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ô‡πâ‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤-‡∏≠‡∏≠‡∏Å) ‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö Chiller ‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?", "c": ["2¬∞F", "5¬∞F", "10¬∞F", "20¬∞F"], "a": "10¬∞F"},
        {"q": "‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ VSD (Variable Speed Drive) ‡∏Å‡∏±‡∏ö‡∏õ‡∏±‡πä‡∏°‡∏ô‡πâ‡∏≥‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏∞‡πÑ‡∏£?", "c": ["‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏£‡∏á‡∏î‡∏±‡∏ô‡∏ô‡πâ‡∏≥", "‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ Load ‡∏•‡∏î‡∏•‡∏á", "‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ô‡πâ‡∏≥‡πÄ‡∏¢‡πá‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô", "‡∏•‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏ö‡∏Å‡∏ß‡∏ô"], "a": "‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ Load ‡∏•‡∏î‡∏•‡∏á"},
        {"q": "Low Delta T Syndrome (‡πÄ‡∏ä‡πà‡∏ô Delta T ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏Ñ‡πà 3-4¬∞F) ‡∏™‡πà‡∏á‡∏ú‡∏•‡πÄ‡∏™‡∏µ‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?", "c": ["‡∏õ‡∏±‡πä‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á Flow ‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô", "Chiller ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÑ‡∏ü‡∏Ç‡∏∂‡πâ‡∏ô", "‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ô‡πâ‡∏≥‡πÄ‡∏¢‡πá‡∏ô‡∏à‡∏±‡∏î", "‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏ú‡∏•‡πÄ‡∏™‡∏µ‡∏¢"], "a": "‡∏õ‡∏±‡πä‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á Flow ‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô"}
    ]
}

# --- 3. ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å (Navigation) ---
st.sidebar.title("üöÄ Team Sensor Center")
page = st.sidebar.radio("‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å", ["Dashboard ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°", "Learning Academy (‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô)", "Quiz ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ"])

# ================= DASHBOARD PAGE =================
if page == "Dashboard ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°":
    st.title("üåè Real-time Command Center")
    st.caption("‡∏°‡∏≠‡∏ô‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Site ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢ (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ)")
    
    # Mockup Data (‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô pd.read_csv ‡∏´‡∏£‡∏∑‡∏≠ Google Sheets API)
    if 'sites' not in st.session_state:
        st.session_state.sites = pd.DataFrame({
            'Site Name': ['RBS Chonburi', 'Central Ayutthaya', 'RBS Rayong', 'Robinson Saraburi'],
            'Lat': [13.3611, 14.3532, 12.6828, 14.5290],
            'Lon': [100.9847, 100.5700, 101.2816, 100.9130],
            'Status': ['Normal', 'Critical', 'Maintenance', 'Normal'],
            'IP Address': ['192.168.1.10', '192.168.1.25', '192.168.2.10', '192.168.1.55'],
            'Last PM': ['2025-01-10', '2025-02-15', '2024-12-20', '2025-01-05']
        })

    # Metrics
    col1, col2, col3, col4 = st.columns(4)
    col1.metric("Total Sites", len(st.session_state.sites))
    col2.metric("Critical Status", len(st.session_state.sites[st.session_state.sites['Status']=='Critical']), delta="-1 change")
    col3.metric("Sensors Online", "98.2%", "stable")
    col4.metric("Pending PM Jobs", "2", "Urgent")

    # Map & Data Editor
    col_map, col_data = st.columns([1, 1])
    
    with col_map:
        st.subheader("üìç ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞")
        map_df = st.session_state.sites.copy()
        # ‡∏™‡∏µ‡∏à‡∏∏‡∏î: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß=‡∏õ‡∏Å‡∏ï‡∏¥, ‡πÅ‡∏î‡∏á=‡∏ß‡∏¥‡∏Å‡∏§‡∏ï
        map_df['color'] = map_df['Status'].apply(lambda x: '#00FF00' if x=='Normal' else '#FF0000')
        st.map(map_df, latitude='Lat', longitude='Lon', size=20, color='color')

    with col_data:
        st.subheader("üìù ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Site")
        edited_df = st.data_editor(st.session_state.sites, num_rows="dynamic")
        if st.button("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"):
            st.session_state.sites = edited_df
            st.success("‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!")

# ================= LEARNING PAGE =================
elif page == "Learning Academy (‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô)":
    st.title("üìö Team Sensor Academy")
    st.markdown("‡πÅ‡∏´‡∏•‡πà‡∏á‡∏£‡∏ß‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ Engineering ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á (CPMS, Audit, Calibration)")
    
    # ‡πÄ‡∏û‡∏¥‡πà‡∏° Tab 4 ‡πÅ‡∏•‡∏∞ 5 ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ç‡∏≠
    tab1, tab2, tab3, tab4, tab5 = st.tabs([
        "1. Heat Balance Analysis", 
        "2. Efficiency (kW/RT)", 
        "3. Sensor Calibration",
        "4. ‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ CQ1-CQ7",        # ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
        "5. ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô (Audit)"   # ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
    ])
    
    with tab1:
        st.header("üî• ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå Heat Balance")
        st.info("Heat Balance ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏Ç‡∏≠‡∏á‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ß‡∏±‡∏î‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ")
        st.latex(r"\% Heat Balance = \frac{(Q_{evap} + W_{input}) - Q_{cond}}{Q_{cond}} \times 100")
        st.markdown("""
        **‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:**
        * $Q_{evap}$: ‡∏†‡∏≤‡∏£‡∏∞‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏¢‡πá‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏î‡πâ (Ton -> kW)
        * $W_{input}$: ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏≠‡∏°‡πÄ‡∏û‡∏£‡∏™‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÉ‡∏ä‡πâ (kW)
        * $Q_{cond}$: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏î‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå (kW)
        
        **‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö:** ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô **¬±5%**
        * ‡∏ñ‡πâ‡∏≤‡∏Ñ‡πà‡∏≤‡∏ö‡∏ß‡∏Å (+) ‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ: ‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å Flow ‡∏ù‡∏±‡πà‡∏á Condenser ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á
        * ‡∏ñ‡πâ‡∏≤‡∏Ñ‡πà‡∏≤‡∏•‡∏ö (-) ‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ: ‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å Flow ‡∏ù‡∏±‡πà‡∏á Evaporator ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡∏´‡∏£‡∏∑‡∏≠ Sensor ‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô
        """)
        
    with tab2:
        st.header("‚ö° ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û (Efficiency)")
        st.markdown("""
        **‡∏™‡∏π‡∏ï‡∏£‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:**
        $$
        kW/RT = \\frac{\\text{Power Input (kW)}}{\\text{Cooling Load (Ton)}}
        $$
        * **‡∏¢‡∏¥‡πà‡∏á‡∏ô‡πâ‡∏≠‡∏¢ ‡∏¢‡∏¥‡πà‡∏á‡∏î‡∏µ** (‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÑ‡∏ü)
        * ‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô Chiller ‡πÉ‡∏´‡∏°‡πà‡πÜ ‡∏°‡∏±‡∏Å‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà 0.55 - 0.65 kW/RT
        
        **Approach Temperature:**
        * ‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏•‡∏ï‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á "‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ô‡πâ‡∏≥‡∏Ç‡∏≤‡∏≠‡∏≠‡∏Å (LWT)" ‡∏Å‡∏±‡∏ö "‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏™‡∏≤‡∏£‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏¢‡πá‡∏ô (Refrigerant Temp)"
        * **Condenser Approach:** ‡∏ñ‡πâ‡∏≤‡∏¢‡∏¥‡πà‡∏á‡∏™‡∏π‡∏á ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡∏ó‡πà‡∏≠‡∏™‡∏Å‡∏õ‡∏£‡∏Å ‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å (‡∏Ñ‡∏ß‡∏£ < 3¬∞F)
        """)

    with tab3:
        st.header("üõ†Ô∏è ‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö (Calibration)")
        st.markdown("""
        **‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Error:**
        $$
        Error = Reading (DUT) - Standard (Ref)
        $$
        * **DUT:** Device Under Test (‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏±‡∏î)
        * **Standard:** ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô (‡πÉ‡∏ô‡∏ó‡∏µ‡∏°‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ **Testo 440dp**)
        
        **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô:**
        1. ‡∏ß‡∏≤‡∏á Probe ‡∏Ç‡∏≠‡∏á Standard ‡πÅ‡∏•‡∏∞ DUT ‡πÑ‡∏ß‡πâ‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ô ‡πÉ‡∏´‡πâ‡∏•‡∏°‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô
        2. ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤ **Stable** (‡∏ô‡∏¥‡πà‡∏á)
        3. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Error
        4. ‡∏ñ‡πâ‡∏≤ Error ‡πÄ‡∏Å‡∏¥‡∏ô Spec ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ **Adjustment** (‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤) ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
        """)

    # --- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà: Tab 4 ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á CQ Parameter ---
    with tab4:
        st.header("‡πÑ‡∏Ç‡∏£‡∏´‡∏±‡∏™‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ CQ (Commissioning Questionnaire)")
        st.info("‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ CQ ‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡πà‡∏≤‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏≥‡∏°‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Heat Balance ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û")
        
        # ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• CQ
        cq_data = [
            {"Code": "CQ1", "Name": "Inlet Condensing Temp", "Detail": "‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ô‡πâ‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ Condenser (‡∏ó‡πà‡∏≠ Main CDS) ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Heat Balance"},
            {"Code": "CQ2", "Name": "Inlet Evaporator Temp", "Detail": "‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ô‡πâ‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ Evaporator (‡∏ó‡πà‡∏≠ Main CHR) ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö Flow ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤ Cooling Load"},
            {"Code": "CQ3", "Name": "Outlet Condensing Temp", "Detail": "‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ô‡πâ‡∏≥‡∏≠‡∏≠‡∏Å Condenser (‡∏ó‡πà‡∏≠ Main CDR) ‡πÉ‡∏ä‡πâ‡πÄ‡∏ä‡πá‡∏Ñ Delta T ‡∏ù‡∏±‡πà‡∏á‡∏£‡πâ‡∏≠‡∏ô"},
            {"Code": "CQ4", "Name": "Outlet Evaporator Temp", "Detail": "‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ô‡πâ‡∏≥‡∏≠‡∏≠‡∏Å Evaporator (‡∏ó‡πà‡∏≠ Main CHS) ‡πÉ‡∏ä‡πâ‡πÄ‡∏ä‡πá‡∏Ñ Delta T ‡∏ù‡∏±‡πà‡∏á‡πÄ‡∏¢‡πá‡∏ô"},
            {"Code": "CQ5", "Name": "Diff Pressure (CDP)", "Detail": "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡πä‡∏° Condenser (‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Flow ‡∏ó‡∏≤‡∏á‡∏≠‡πâ‡∏≠‡∏°)"},
            {"Code": "CQ6", "Name": "Diff Pressure (CHP)", "Detail": "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡πä‡∏° Chiller (‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Flow ‡∏ó‡∏≤‡∏á‡∏≠‡πâ‡∏≠‡∏°)"},
            {"Code": "CQ7", "Name": "Building Load (kW)", "Detail": "‡∏†‡∏≤‡∏£‡∏∞‡πÇ‡∏´‡∏•‡∏î‡∏ó‡∏≤‡∏á‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)"}
        ]
        st.table(pd.DataFrame(cq_data))
        
        st.warning("‚ö†Ô∏è ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô CPN ‡∏û‡∏ö‡∏ß‡πà‡∏≤‡∏ö‡∏≤‡∏á‡∏™‡∏≤‡∏Ç‡∏≤‡∏¢‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Sensor ‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ Chiller (GUI) ‡πÅ‡∏ó‡∏ô ‡∏ã‡∏∂‡πà‡∏á‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏•‡∏≤‡∏î‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô")

    # --- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà: Tab 5 ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô ---
    with tab5:
        st.header("üìã ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô (Site Audit Steps)")
        st.markdown("‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠: *TIESmartSolutions - CPMS audit guide*")
        
        col_step1, col_step2 = st.columns(2)
        
        with col_step1:
            st.subheader("1. ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏¢‡∏†‡∏≤‡∏û (Physical Data)")
            st.markdown("""
            ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á:
            * ‚úÖ **Chiller:** ‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ô (Ton)? ‡∏°‡∏µ‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß? (Quantity)
            * ‚úÖ **Chilled Pump (CHP):** ‡∏Ç‡∏ô‡∏≤‡∏î‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå (kW)?
            * ‚úÖ **Condenser Pump (CDP):** ‡∏Ç‡∏ô‡∏≤‡∏î‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå (kW)?
            * ‚úÖ **Cooling Tower:** ‡∏Ç‡∏ô‡∏≤‡∏î‡∏û‡∏±‡∏î‡∏•‡∏° (kW)? ‡∏°‡∏µ‡∏Å‡∏µ‡πà‡πÄ‡∏ã‡∏•‡∏•‡πå?
            * ‚úÖ **Schedule:** ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î‡∏£‡∏∞‡∏ö‡∏ö (Start/Stop Time)
            """)
        
        with col_step2:
            st.subheader("2. ‡∏à‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ (HMI Recording)")
            st.markdown("""
            ‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ Chiller ‡πÅ‡∏•‡∏∞‡∏à‡∏î‡∏Ñ‡πà‡∏≤‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ (‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ):
            1.  **Power Consumption:** (kW, Volts, Amps)
            2.  **Setpoint:** ‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ‡∏Å‡∏µ‡πà‡∏≠‡∏á‡∏®‡∏≤?
            3.  **%FLA / %RLA:** ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏Å‡∏µ‡πà %?
            4.  **Evaporator Temp:** ‡∏ô‡πâ‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤/‡∏ô‡πâ‡∏≥‡∏≠‡∏≠‡∏Å (Entering/Leaving)
            5.  **Condenser Temp:** ‡∏ô‡πâ‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤/‡∏ô‡πâ‡∏≥‡∏≠‡∏≠‡∏Å (Entering/Leaving)
            6.  **Refrigerant Temp:** ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡πÅ‡∏≠‡∏£‡πå (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏π Approach Temp)
            """)
            
        st.success("üí° Tip: ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü Cooling Tower ‡πÉ‡∏´‡πâ‡∏Ñ‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏û‡∏±‡∏î‡∏•‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏£‡∏¥‡∏á x ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏õ‡∏¥‡∏î 12 ‡∏ï‡∏±‡∏ß ‡∏à‡∏≤‡∏Å 25 ‡∏ï‡∏±‡∏ß = 50% Load)")

# ================= QUIZ PAGE =================
elif page == "Quiz ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ":
    st.title("‚úçÔ∏è ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ (Quiz)")
    st.caption("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö (‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏•‡∏∞ 10 ‡∏Ç‡πâ‡∏≠)")
    
    topic = st.selectbox("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏™‡∏≠‡∏ö:", list(quiz_data.keys()))
    
    if "current_quiz" not in st.session_state or st.session_state.quiz_topic != topic:
        st.session_state.quiz_topic = topic
        st.session_state.current_quiz = quiz_data[topic] # ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° 10 ‡∏Ç‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ô‡∏±‡πâ‡∏ô
        st.session_state.score = 0
        st.session_state.submitted = False

    # ‡∏™‡∏£‡πâ‡∏≤‡∏á Form ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏ï‡∏≠‡∏ô‡∏Å‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πâ‡∏≠‡∏¢‡∏™‡πå
    with st.form("quiz_form"):
        user_answers = {}
        for i, q_item in enumerate(st.session_state.current_quiz):
            st.markdown(f"**‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà {i+1}: {q_item['q']}**")
            # Radio button ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
            user_answers[i] = st.radio(f"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠ {i+1}", q_item['c'], key=f"q_{topic}_{i}", index=None, label_visibility="collapsed")
            st.markdown("---")
        
        submit_btn = st.form_submit_button("‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö")
    
    if submit_btn:
        score = 0
        st.session_state.submitted = True
        st.header("üìä ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö")
        
        for i, q_item in enumerate(st.session_state.current_quiz):
            u_ans = user_answers.get(i)
            correct_ans = q_item['a']
            
            if u_ans == correct_ans:
                score += 1
                st.success(f"‡∏Ç‡πâ‡∏≠ {i+1}: ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‚úÖ")
            else:
                st.error(f"‡∏Ç‡πâ‡∏≠ {i+1}: ‡∏ú‡∏¥‡∏î! ‚ùå (‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∑‡∏≠: {correct_ans})")
        
        st.metric("‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì", f"{score} / 10")
        if score >= 8:
            st.balloons()
            st.success("‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç üéâ")
        else:
            st.warning("‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î! ‡∏•‡∏≠‡∏á‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏≤‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞")